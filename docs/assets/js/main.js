"use strict";let userInfo={palette:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:"",miniature:""};const buttonResetEl=document.querySelector(".reset__btn"),selectEl=document.querySelector("#palette--blue-green"),formEl=document.querySelectorAll(".fillTheGap-input"),miniatureEl=document.querySelector(".profile-miniature"),photoPreviewEl=document.querySelector(".card__picture"),userNameEl=document.querySelector(".card-user__name"),userJobEl=document.querySelector(".card-user__position"),buttonResetYEl=document.querySelector(".btn-resetY"),buttonResetNEl=document.querySelector(".btn-resetN"),containerAlertEl=document.querySelector(".alert");function alertReset(){containerAlertEl.classList.add("alert-delete")}function keepInfo(){containerAlertEl.classList.remove("alert-delete")}function resetInputs(){for(let e=0;e<formEl.length;e++)formEl[e].value=""}function resetCard(){userNameEl.innerHTML="User name",userJobEl.innerHTML="User job"}function resetRRSSCircles(){const e=document.querySelectorAll(".card__item-list");for(let t=0;t<e.length;t++)e[t].classList.remove("card__item-list"),e[t].classList.add("card__item-list-no-border")}function resetSelect(){selectEl.checked=!0,changePaletteGreen()}function resetPhotos(){profileImage.style.backgroundImage='url("assets/images/darth-vader.jpg")',profilePreview.style.backgroundImage="none"}function handlerButtonResetClick(){resetInputs(),resetCard(),resetRRSSCircles(),resetSelect(),resetPhotos(),containerAlertEl.classList.remove("alert-delete"),localStorage.removeItem("userInfo")}buttonResetEl.addEventListener("click",alertReset),buttonResetNEl.addEventListener("click",keepInfo),buttonResetYEl.addEventListener("click",handlerButtonResetClick);const setName=document.querySelector("#name"),cardUserName=document.querySelector(".card-user__name");function getUserName(){const e=setName.value;userInfo.name=e,cardUserName.innerHTML=e,""===e&&(cardUserName.innerHTML="User name"),saveDataLs(),console.log(userInfo)}setName.addEventListener("keyup",getUserName);const setJob=document.querySelector("#job"),cardUserJob=document.querySelector(".card-user__position");function getUserJob(){const e=setJob.value;userInfo.job=e,cardUserJob.innerHTML=e,""===e&&(cardUserJob.innerHTML="User job"),saveDataLs()}setJob.addEventListener("keyup",getUserJob);const inputEmailEl=document.querySelector("#email");let linkEmailEl=document.querySelector(".email");function handlerEmail(){const e=inputEmailEl.value;userInfo.email=e,linkEmailEl.href=`mailto:${e}`,console.log(linkEmailEl),saveDataLs()}inputEmailEl.addEventListener("keyup",handlerEmail);const inputTel=document.getElementById("phone"),linkTel=document.getElementById("phone-link");function changeLinkTel(){linkTel.setAttribute("href","tel: +34"+inputTel.value);const e=inputTel.value;userInfo.phone=e,saveDataLs()}inputTel.addEventListener("keyup",changeLinkTel);const setGitHub=document.querySelector("#gitHub"),cardUserGitHub=document.querySelector("#gitHub-link"),iconStyle=document.querySelector("#gitHubEl");function getGitHub(){const e=setGitHub.value;userInfo.github=e,cardUserGitHub.setAttribute("target","_blank"),""!==e?(iconStyle.classList.add("card__item-list-default"),cardUserGitHub.href=`https://github.com/${e}`):cardUserGitHub.href="",console.log(e),saveDataLs()}setGitHub.addEventListener("keyup",getGitHub);const inputLnkdIn=document.querySelector("#linkedin"),linkLnkdIn=document.querySelector(".card__link-linkedin");function handleInputKeyup(){const e=inputLnkdIn.value;userInfo.linkedin=e,linkLnkdIn.href=e,saveDataLs()}inputLnkdIn.addEventListener("keyup",handleInputKeyup);const userName=document.querySelector(".card-user"),inputRed=document.getElementById("palette--red-orange"),inputGrey=document.getElementById("palette--blue-gray"),inputGreen=document.getElementById("palette--blue-green"),contactList=document.querySelector(".card-sm__container");function changePaletteRed(){userInfo.palette=2,saveDataLs(),userName.classList.remove("gray-palette","green-palette","borderLeftGreen","borderLeftGray"),userName.classList.add("red-palette","borderLeftRed"),contactList.classList.remove("gray-palette","green-palette"),contactList.classList.add("red-palette")}function changePaletteGray(){userInfo.palette=3,saveDataLs(),userName.classList.remove("green-palette","red-palette","borderLeftGreen","borderLeftRed"),userName.classList.add("gray-palette","borderLeftGray"),contactList.classList.remove("green-palette","red-palette"),contactList.classList.add("gray-palette")}function changePaletteGreen(){userInfo.palette=1,saveDataLs(),userName.classList.remove("gray-palette","red-palette","borderLeftGray","borderLeftRed"),userName.classList.add("green-palette","borderLeftGreen"),contactList.classList.remove("gray-palette","red-palette"),contactList.classList.add("green-palette")}function emailCircle(){const e=document.getElementById("email-li");""===document.getElementById("email").value?(e.classList.add("card__item-list-no-border"),e.classList.remove("card__item-list")):(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"))}inputRed.addEventListener("click",changePaletteRed),inputGrey.addEventListener("click",changePaletteGray),inputGreen.addEventListener("click",changePaletteGreen);const mailInput=document.getElementById("email");function phoneCircle(){const e=document.getElementById("phone-li");""===document.getElementById("phone").value?(e.classList.add("card__item-list-no-border"),e.classList.remove("card__item-list")):(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"))}mailInput.addEventListener("keyup",emailCircle);const phoneInput=document.getElementById("phone");function linkedinCircle(){const e=document.getElementById("linkedin-li");""===document.getElementById("linkedin").value?(e.classList.add("card__item-list-no-border"),e.classList.remove("card__item-list")):(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"))}phoneInput.addEventListener("keyup",phoneCircle);const linkedinInput=document.getElementById("linkedin");function githubCircle(){const e=document.getElementById("gitHubEl");""===document.getElementById("gitHub").value?(e.classList.add("card__item-list-no-border"),e.classList.remove("card__item-list")):(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"))}linkedinInput.addEventListener("keyup",linkedinCircle);const githubInput=document.getElementById("gitHub");githubInput.addEventListener("keyup",githubCircle);const arrowIconDesign=document.querySelector("#arrow-design"),sectionDesign=document.querySelector("#section-design"),arrowButtonDesign=document.querySelector("#ButtonDesign");function hideDesignSection(){sectionDesign.classList.toggle("hidden"),arrowIconDesign.classList.toggle("fa-chevron-up"),arrowIconDesign.classList.toggle("fa-chevron-down"),sectionFill.classList.contains("hidden")?sectionShare.classList.contains("hidden")||(sectionShare.classList.add("hidden"),arrowIconShare.classList.toggle("fa-chevron-up"),arrowIconShare.classList.toggle("fa-chevron-down")):(sectionFill.classList.add("hidden"),arrowIconFill.classList.toggle("fa-chevron-up"),arrowIconFill.classList.toggle("fa-chevron-down"))}arrowButtonDesign.addEventListener("click",hideDesignSection);const arrowIconFill=document.querySelector("#arrow-fillTheGap"),sectionFill=document.querySelector(".fillTheGap"),arrowButtonFill=document.querySelector("#ButtonFill");function hideFillSection(){sectionFill.classList.toggle("hidden"),arrowIconFill.classList.toggle("fa-chevron-up"),arrowIconFill.classList.toggle("fa-chevron-down"),sectionDesign.classList.contains("hidden")?sectionShare.classList.contains("hidden")||(sectionShare.classList.add("hidden"),arrowIconShare.classList.toggle("fa-chevron-up"),arrowIconShare.classList.toggle("fa-chevron-down")):(sectionDesign.classList.add("hidden"),arrowIconDesign.classList.toggle("fa-chevron-up"),arrowIconDesign.classList.toggle("fa-chevron-down"))}arrowButtonFill.addEventListener("click",hideFillSection);const arrowIconShare=document.querySelector("#arrow-share"),sectionShare=document.querySelector("#section-share"),arrowButtonShare=document.querySelector("#ButtonShare");function hideShareSection(){sectionShare.classList.toggle("hidden"),arrowIconShare.classList.toggle("fa-chevron-up"),arrowIconShare.classList.toggle("fa-chevron-down"),sectionDesign.classList.contains("hidden")?sectionFill.classList.contains("hidden")||(sectionFill.classList.add("hidden"),arrowIconFill.classList.toggle("fa-chevron-up"),arrowIconFill.classList.toggle("fa-chevron-down")):(sectionDesign.classList.add("hidden"),arrowIconDesign.classList.toggle("fa-chevron-up"),arrowIconDesign.classList.toggle("fa-chevron-down"))}arrowButtonShare.addEventListener("click",hideShareSection);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var t=e.currentTarget.files[0];return fr.addEventListener("load",writeImage),fr.readAsDataURL(t),t}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,userInfo.photo=fr.result,userInfo.miniature=fr.result,console.log(fr.result),saveDataLs()}function fakeFileClick(){fileField.click()}function saveDataLs(){localStorage.setItem("userInfo",JSON.stringify(userInfo))}function printDatafromLS(){const e=localStorage.getItem("userInfo");e&&(userInfo=JSON.parse(e),fillFormfromOBject(),fillCardfromObject(),fillPaletteObject())}function fillPaletteObject(){1===userInfo.palette?(inputGreen.checked=!0,changePaletteGreen()):2===userInfo.palette?(inputRed.checked=!0,changePaletteRed()):(inputGrey.checked=!0,changePaletteGray())}function fillFormfromOBject(){setName.value=userInfo.name,setJob.value=userInfo.job,inputEmailEl.value=userInfo.email,inputTel.value=userInfo.phone,setGitHub.value=userInfo.github,linkedinInput.value=userInfo.linkedin,profilePreview.style.backgroundImage=`url(${userInfo.miniature})`,profileImage.style.backgroundImage=`url(${userInfo.photo})`}function fillCardfromObject(){cardUserName.innerHTML=userInfo.name||"User name",cardUserJob.innerHTML=userInfo.job||"User job",profileImage.style.backgroundImage=userInfo.photo,fillEmail(),fillPhone(),fillLinkedin(),fillGitHub()}function fillEmail(){const e=document.getElementById("email-li"),t=document.querySelector(".email");inputEmailEl.value&&(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"),t.href=`mailto:${inputEmailEl.value}`)}function fillPhone(){const e=document.getElementById("phone-li");inputTel.value&&(linkTel.setAttribute("href","tel: +34"+inputTel.value),e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"))}function fillLinkedin(){const e=document.getElementById("linkedin-li");linkedinInput.value&&(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"),linkLnkdIn.href=linkedinInput.value)}function fillGitHub(){const e=document.getElementById("gitHubEl"),t=setGitHub.value;linkedinInput.value?(e.classList.remove("card__item-list-no-border"),e.classList.add("card__item-list"),cardUserGitHub.href=`https://github.com/${t}`,cardUserGitHub.setAttribute("target","_blank")):cardUserGitHub.href=""}function sendRequest(e){buttonShareEL.disabled=!0,fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(e){return buttonShareEL.disabled=!1,e.json()}).then(function(e){showURL(e)}).catch(function(e){console.log(e)})}function showURL(e){const t=document.querySelector(".response"),n=document.querySelector(".btn-twitter"),r=document.querySelector(".twitter__link");e.success?(t.innerHTML="<a href="+e.cardURL+">"+e.cardURL+"</a>",n.classList.remove("hidden"),r.href="https://twitter.com/intent/tweet?text=My awesome profile card "+e.cardURL):t.innerHTML="ERROR:"+e.error}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage),printDatafromLS();const buttonShareEL=document.querySelector(".btn-share");function handlerButtonShare(){sendRequest(userInfo)}buttonShareEL.addEventListener("click",handlerButtonShare);